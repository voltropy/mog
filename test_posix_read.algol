fn main() -> i64 {
  fd: i64 = open("test_read.txt", O_CREAT | O_WRONLY, 0644);

  if (fd == -1) {
    return 1;
  }

  write(fd, "Test data for reading\n", 21);
  close(fd);

  fd = open("test_read.txt", O_RDONLY, 0);

  if (fd == -1) {
    return 2;
  }

  buf: i64[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];

  bytes_read: i64 = read(fd, buf, 21);

  if (bytes_read == -1) {
    close(fd);
    return 3;
  }

  close(fd);

  return 0;
}