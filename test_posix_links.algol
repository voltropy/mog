# Test POSIX link, symlink, and readlink operations
fn main() -> i64 {
  fd: i64 = open("test_posix_links_file.txt", O_CREAT | O_WRONLY, 0644);

  if (fd == -1) {
    return 1;
  }

  write(fd, "Test content for links\n", 23);
  close(fd);

  link_result: i64 = link("test_posix_links_file.txt", "test_posix_links_hard.txt");

  if (link_result == -1) {
    unlink("test_posix_links_file.txt");
    return 2;
  }

  symlink_result: i64 = symlink("test_posix_links_file.txt", "test_posix_links_symlink.txt");

  if (symlink_result == -1) {
    unlink("test_posix_links_file.txt");
    unlink("test_posix_links_hard.txt");
    return 3;
  }

  unlink("test_posix_links_file.txt");
  unlink("test_posix_links_hard.txt");
  unlink("test_posix_links_symlink.txt");

  return 0;
}